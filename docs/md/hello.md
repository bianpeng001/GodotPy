[TOC]

# 洒家的博客

## 无题

<div class="date">xxxx年x月xx日</div>

## 玩法笔记(3)

继续主线和存档, 主线需要一个事件生成器. 一些大事件按照配置走, 随机事件的产生. 用来生成一些任务, 主要是提供一些收益. 比如盗贼, 经商等.

存档, sqlitedb, 以及配合json. 应该绰绰有余. sqlite的好处是, 方便查看.

所谓豪杰二字, 区别于曹操说的英雄. 英雄的门槛太高了, 但豪杰, 就各式各样. 对应于各行各业, 掌握了一技之长的人. 普通人能挑100斤, 我能挑200斤, 此之谓豪杰; 别人高考500分, 我600分, 可以称豪杰, 700分, 就是豪杰中的豪杰. 简而言之, 英雄, 是最后收割的那几个人; 豪杰, 则是英雄预备队, 无限接近英雄, 最终止步决赛的那群人. 比如著名的冢中枯骨袁绍袁术兄弟, 三姓家奴吕布, 北地枪王张绣, 西北军阀马家父子, 五斗米教张家, 荆州刘表刘景升, 江东孙氏父子, 就算是坟头草有人高的张角兄弟, 隋唐十八路反王, 元末英烈, 五代枭雄, 前秦苻坚, 哪个不曾吞吐天地矫若龙虎, 虽然最后因为自身的一些短板, 或者运气太差, 不甘地倒在了真英雄的面前. 与英雄二字失之交臂, 但是, 在历史的长河里, 留下的身前身后名, 却是无比的精彩, 令人扼腕叹息.

天下英雄, 唯使君与操耳. 魏武汉昭烈, 的确无愧于英雄. 天下豪杰, 则是英雄产生的土壤, 如众星拱月般, 最后的英雄从豪杰里破土而出. 土壤的品质, 决定了果实的品质.
曹操说, "设使国家无有孤，不知当几人称帝，几人称王！" 也是对这些豪杰们的历史地位的确定. 
青年时期时期 "欲望封侯作征西将军，然后题墓道言 “汉故征西将军曹侯之墓”，此其志也。" 正是有吕布袁绍刘备, 这样的对手, 最后成就了赫赫威名的魏武帝. 

对这群这些在乱世中, 不甘平凡, 反抗命运, 抛头颅洒热血, 还百姓一个太平而努力的人. 我辈读书人, 只有敬佩, 心向往之.

<div class="date">2023年3月28日</div>

## 场景地图

一直想不出太好的方案左右为难, 兼顾好看简单高效. 点兵点将考虑下来, 唯有牺牲一下好看. 毕竟, 就算我绞尽脑汁, 做到自认的好看, 在专业眼中仍旧是一片渣渣. 兵法曰, 有比没有好. 好看什么的后面再追求, 搁置争议优先功能. 须知由俭入奢易, 由奢入俭难. 

截屏留念!

![screenshot02](img/screenshot02.png)

![screenshot03](img/screenshot03.png)

然后把边角用材质修整一下, 看起来不那么锋利, 马马虎虎就算搞好了. 前辈们手搓卫星的那个年代, 条件得比这艰苦吧多了. 只要目标没错, 中间的路径可以宽松一些.

优化了一下下, 把边角处理了一下, 锯齿处理掉一些. 然后继续回来搞主线和存档, 地图以后用常规的方案来做, 做的精细一些. 而不是现在这种残暴的色块. 熟悉地理的就可以认一认, 这是哪里? 

![screenshot04](img/screenshot04.png)


<div class="date">2023年3月27日</div>

## 玩法笔记(3)

身份危机: 终于遇到了一个身份问题?我是谁,我在哪里的问题.
以前在9里面,有一些人也是有这个质疑的. 我是否在武将列表里面,我在的话,我到底是武将还是君主.我若不在,则城内太守是哪个?
9里面的话,是有一个自己的.我觉得放一个自己还好一些. 自己在武将列表里面的话,每个地方都要特殊处理一下. 也挺烦的, 但没有这个自己的话. 有的时候, 任命啥的, 还有自己的数值, 岂不是毫无用处. 毕竟很多君主的数值是真的很牛逼. 况且, 没有这个本体英雄, 如何俘虏对方君主收为己用呢?

[九州](https://zh.wikipedia.org/zh-hant/%E4%B9%9D%E5%B7%9E_(%E4%B8%AD%E5%9B%BD)),还是得要的.

![三国时期的九州](https://upload.wikimedia.org/wikipedia/commons/b/b7/%E4%B8%89%E5%9C%8B%E6%99%82%E6%9C%9F%E8%A1%8C%E6%94%BF%E5%8D%80%E5%8A%83%E5%9C%96.svg)

[三国官制](https://zh.wikipedia.org/wiki/%E4%B8%89%E5%9B%BD%E5%AE%98%E5%88%B6)

曹魏地方官制

- 州: 州牧(刺史). 置治中从事、别驾从事、功曹从事、簿曹从事、兵曹从事、郡国从事、文学从事、武猛从事、督邮、主簿、帐下督、门亭长、书佐、计吏.
- 郡: 太守. 置司马,长史,都尉.
- 县: 县令. 置县丞,县尉.

游戏名字有想法了 
- 豪杰是怎样练成的
- 豪杰科目一
- 羞辱孙权的一百种方法

<div class="date">2023年3月24日</div>

## 军队操作

目前给军队加了个上下文菜单, 
- 目标: 修改目标的一个快速操作
- 策略: 修改阵形,目标,策略等
- 撤退: 撤退的快速操作,自动退回本城

处理英雄同时只能做一件事情, 提高人才的重要性
>短歌行<br/>
對酒當歌，人生幾何！<br/>
譬如朝露，去日苦多。<br/>
慨當以慷，憂思難忘。<br/>
何以解憂？唯有杜康。<br/>
青青子衿，悠悠我心。<br/>
但爲君故，沉吟至今。<br/>
呦呦鹿鳴，食野之苹。<br/>
我有嘉賓，鼓瑟吹笙。<br/>
明明如月，何時可掇？<br/>
憂從中來，不可斷絕。<br/>
越陌度阡，枉用相存。<br/>
契闊談宴，心念舊恩。<br/>
月明星稀，烏鵲南飛。<br/>
繞樹三匝，何枝可依？<br/>
山不厭高，海不厭深。<br/>
周公吐哺，天下歸心。<br/>

所以,多招募点英雄吧, 人多了好干活.

>观沧海<br/>
东临碣石，以观沧海。<br/>
水何澹澹，山岛竦峙。<br/>
树木丛生，百草丰茂。<br/>
秋风萧瑟，洪波涌起。<br/>
日月之行，若出其中。<br/>
星汉灿烂，若出其里。<br/>
幸甚至哉，歌以咏志。<br/>

<div class="date">2023年3月22日</div>

## 玩法笔记(2)

内政和战斗继续细化下去.其实当初有一个遗憾,是相对于前面的官员扮演,政治事件发生太少.所以,后面几代的事件就多了不少的. 可能的故事是这样的

在黄巾起义之后,随着军阀实力的提升,地方武装,不论是黄巾还是地主武装,在大势面前,逐步接受现状,要么回家务农,要么参军,要么在地方上担任一官半职,比如安喜县尉.

第一个选择,遣散回乡(游戏结束),任职县尉(得到一个小县),带队投军(得到一个关卡)

这个阶段的特点,就是内政,剿匪,保境,安民. 县城要朴素,小,城墙低矮.
发展到一定程度,督邮前来考核勒索.

第二次选择,交钱妥协(继续发展,魅力大减),鞭打督邮(换个大点的县城,魅力大增).

继续发展, 接下来发生的事件有,参与救援.

...

周围有敌军,则可以进入战斗;没有敌军,则进入资源配送,经商.

后面如果遇到强敌,也会出现一些文案,投靠关系较好的诸侯,然后得到一个小城,继续战斗.
总体而言要体现忠义,体现谋略,有准备的冒险精神; 区别于奸诈背叛,莽夫,束手就擒.


<div class="date">2023年3月19日</div>

## Demo v0.0.7

我感觉这是一个比较稳定的版本了,目前需要编译c++的部分越来越少.估计有一些访问接口, 后面遇到了逐步添加即可.

1. 内政,出战界面基本完工 (这样,两个玩法就有了,内政和出战)
2. 资源增长,做了第一版数值. ( 很粗糙, 略尴尬, 后面还要做一些应用题才行 )
3. 程序接口进一步完善, 资源加载接口ok, 只有一个接口load_resource, 包内资源
4. HUD细化,根据可见复用,不可见的立马回收
5. 地图开始用pcg方式来进行 (build mesh的接口, 接下来, 要把地图弄得多样性一些, 大约就是一些拼接)

TODO:

1. 细化战斗,攻城,场景和地图界面
2. 改善资源,学习美术,这个是长期的追求,不可着急

![screenshot01](img/screenshot01.png)


最近AI风头正劲, 各路豪杰不断的放出自己憋了好久的大招, 一出手就是让人眼花缭乱羡慕不已. 感觉好几个工种, 接下来危险了, 说不定哪一天, 就直接被AI取代了. 这个哪一天, 目测已经不是那么的遥远, 说快也快, 可能就是明天.

所以,还是要好好学一下AI,沾沾光,用一点点AI的好处. 比如, 文案,原画,立绘.

<div class="date">2023年3月17日</div>

## 让地图好看点

做个人吧,做不到真正意义上的好看,但是花点心思收拾一下,哪怕之比原先的地图好看一点点,也算是我的一番努力.

先把地图的细节丰富一下,放点水和草地.

<div class="date">2023年3月13日</div>


## Demo v0.0.6
发一个版本,现在开始,应该逐步强化游戏内容.基础建设已经比较ok了,接下来见招拆招即可.
三国9抄起来,三国10准备抄起来.

内政做得好的话,其实已经够玩了.三国9的内政相对于前几代,其实是大大简化的.就是几个数值,比较单调.
但是他的战斗很好玩,世界大地图上,各种打.水战比较少.节奏快,功利一点,半天时间就能统一.

10的战斗很漂亮,可玩的内容多.但内政元素有点多,所以整体节奏相对于9慢不少.能从青年赵云,打到老年赵云.10的行动力的设计,比较符合现实,9里面是每个人每旬只能做一件事情,10里面是扣减对应的行动力.

<div class="date">2023年3月12日</div>

## 无题

忍了很久,还是忍不住去把HUD的创建和刷新,给重新做了一下复用.包括单位的模型等,后面也得复用.不然也太浪费了. 昨天已经看到瞬间创建一百个队伍的壮观场景,走成一条长龙.密密麻麻的往前冲去.

关于城池资源增长率的公式影响因素,简单点,不用基础增长率了,直接等于0,也省得调.
体现一下,有时候,太守的属性过于低,导致反而不如保底的数值.当数值上来以后,就能做到显著增加了,体现高段位数值的重要性.
先用着,如果有一个人认为这个设计很sb的话,我就认错去掉.

然后计算的原则,就是尽量即时算,浪费点计算量,保证正确性.不然就要加很多事件notification啥的.

以及,城池的英雄列表,还是要根据事件来刷新,不然就是挺丑陋的,容易不同步,也容易出现多刷.

征兵,怎么处理.

<div class="date">2023年3月10日</div>

## 关于UE

UE也很不错,用了一阵,学习曲线遇到了第二个的低谷,又一次感受到了优秀的设计.
1. Object LifeCycle,  TWeakObjectPtr<T>, GC
2. DedicatedServer, 配置方便,蓝图和属性,方法等,都已经支持Replicate. 

接上文,同步这块,上手是容易的,工具设计的也足够方便.但作为游戏开发者,还是要深入看一下实现,对具体流程有一个把握.这时候,障碍就来了. UE分装的比较好的是属性同步,事件广播,RPC也还行. 但还是要求程序对同步机制有深入的了解,至少要看看源码. 属性同步 + 单位创建.

<div class="date">2023年3月8日</div>

## 官军 or 泥腿子

理论上讲,我应该算官军.毕竟在雨田混了好几年,也是奔着学习的心态,学无高下,达者为先.
最后结果是毫无收获,也是挺尴尬.从风头之前,做到风头过去,方案还是没有确定.加上有几个职场智多星,搅得乌烟瘴气.就有点伤了,人财两失.

学到一种开发方式,叫做点菜式.所有菜先点一遍,包括但不限于鲁川粤苏闽浙湘徽,并让几个手下密切关注烹饪节目,发现市场涌现的新菜,随时补充添加,对于做好的菜,随时更新迭代. 至于好还是不好,自行判断,经历过的人都抑郁了.

几年过下来,团队应该把游戏开发中,但凡可能犯的错误,可能踩的坑,都经历过一次以上.这时候,机智的人应该发现了一线生机,只要避开这些坑,岂不就是通向成功的光明大道.硬要说的话,这就是我最大的收获.迅速结束PTSD,投入下一个尝试.

吃过军粮的我们,当起泥腿子子来,应该也是毫无困难的,毕竟谁没当过泥腿子呢.

<div class="date">2023年3月8日</div>

## 无题

代码都是开源的,数据也是明文的.其他的只能祝好运了.
看3d模型的贴图时,无论多好看的模型,看起来都像画皮一样,心中一片平静.
玩游戏变成了解应用题,就无趣了.

年初看满江红,一些人陈词滥调,把岳飞冤死归结为政治低能.感觉这里的政治,就是跟赵构秦桧同流合污的意思,让跪谁就跪谁,让咬谁就咬谁.难以苟同.
所以,这里我简单一些,把政治,按字面意思理解,政务,治理,地方事务的处理能力.

思来想去,还是把图标换了,毕竟图标还是要体现一下内容的.机器人虽然挺可爱,但不还有Python么.Python是巨蟒,跟巨蟒有关的中国题材的话,青龙应该可以.龙之为物,可比世之英雄.正好龙还呼应了Demo的题材,三国嘛.再然后,可能还是机器人盘条龙,会更匹配.体现了godot+python=robot(机器人)+loong(龙).这样的话,不就成了玄武了.

<div class="date">2023年3月7日</div>

## 关于玩法的笔记(1)

基本思路:

1. 做单机游戏,不做网游,因为网游难搞,且各种不方便,开发调试发布等各种方面.
2. 先只做PC,把玩法和系统都稳定出来了,别人能接受的话.再考虑手机,避免多线作战.
3. godot+python. godot的出现,为我们提供了一个选择,在u3d和ue之外. 曾经godot的一个门槛是gdscript,劝退了一些人. 后来官方支持了c#,已经很优秀了. 不过我决定支持一下python,给开发者再多一个选项,岂不美哉. (在任何时候,有得选,都是一个很正向体验).
4. 这是个独立游戏(此间近邑,名曰小沛,足可屯军).
5. 游戏好玩,是游戏开发的最高准则,立身之本. 然后对技术和美术要有点追求的,虽然现在丑点,不代表以后也要这么丑下去.但凡我有一奈奈的颜色天赋,我都不会让他这么丑着.

玩法系统:
1. [内政](#内政) 扮演太守,治理城市
2. 战争 扮演君主,发动战争
3. 收集培养 扮演君主,招贤纳士,唯才是举
4. 外交
5. 偶然事件
6. 剧情叙事

### 内政
分作几个页签,分别处理各种事务
- 治理: 士农工商,等经济活动,官员任命,官员的参数影响生产
- 任命: 城内武将一览,做一些立即指令,登庸,下野,致仕,训斥,训诫,惩戒,赏赐,巡查,探索,搜索,办学
- 案件: 找一些题库,做选择题.给一点奖励或者惩罚
- 制造: 制造战争物资
- 升迁: 随着我方势力的增强

武将得有行动力,不然一个人能干所有的事情, 行动力缓慢恢复.满值100.

### 战争
- 地图: 即时战斗
- 战法: 就可能是战报了
- 单挑: 战报


地图多大合适,10x10偏小, 20x20差不多,400个块,然后按照0.5的密度,差不多200个城. 但是地图还是不够大.
30*30, 密度0.3, 270个城. 应该就差不多了吧, 但是这个密度其实偏小的.

用像素点来进行城市分布,手工控制密度. 然后用颜色来标记海水,陆地,平原,沙漠.

地块的颜色,是根据周围四
地块的颜色来决定的

### 收集,培养
- 目前的武将数值靠随机,有一些数值看着真是太刺激了
- 发现有潜力的人才,逐步培养成大将

### 外交
- 督邮勒索钱财
- 谴使拜访,增进友好度
- 交易

### 偶然事件
生老病死,遇仙

### 剧情叙事
用一些小的示意图,加文字,串一些故事

<div class="date">2023年3月6日</div>

## 上船了

因为godot4.0上船了,所以接下来的构造内容里面,也要有所体现

1. 包含最新的编辑器,可以打开工程.之前的阶段属于远观,接下来就能亵玩焉
2. 功能验证基本完毕,接下来可以实际接玩法了. 包括: 3D,model,animation,scene,tscn,resource,weekend build,material,shader,ui,font,input,sqlite,lifecycle,memory,gc,coroutine...

Demo.zip包含内容
1. Demo.exe demo的运行程序
2. Demo.pck 资源包
3. GodotEditor 引擎的编辑器
4. game/*.py 游戏脚本,主要内容在此
5. python.exe,python3.dll,python312.zip,sqlite3.dll,_sqlite3.pyd python运行环境

<div class="date">2023年3月6日</div>

## godot engine 4.0 released

今天是个好日子，godot 4.0正式发布了。我这也算是49年起义，与有荣焉。

[Godot 4.0 sets sail: All aboard for new horizons](https://godotengine.org/article/godot-4-0-sets-sail)

翻译翻译，什么叫 godot4.0，扬帆，上船往新世界。所以，我正在一条船上，目前的身份应该是水手，拖鞋沙滩裤，头发有点红。或者说, 应该是小农经济下的猎户.

文章末尾说，Enjoy Godot！
那用godot引擎，做一个三国志9好了。弥补一下三国志9里面的一些不够尽兴的地方，三国志9+。

"吾意已决，今岁必写三国九!"

markdown 用例

横线

------

多级无序号

- aaa
  - aa
  - bb
- bbb
- ccc

多级序号

1. aaa
   1. 111
   2. 222
2. bbb
3. ccc

*斜体*
**粗体**

[内部跳转](#aaa)

<a id="aaa">&nbsp;</a>

表格

| Syntax      | Description |
| ----------- | ----------- |
| Header      | Title       |
| Paragraph   | Text        |

:joy:

引用
> 临江仙
滚滚长江东逝水，浪花淘尽英雄。
是非成败转头空。
青山依旧在，几度夕阳红。
白发渔樵江渚上，惯看秋月春风。
一壶浊酒喜相逢。
古今多少事，都付笑谈中。

<div class="date">2023年3月2日</div>

## 三国志9

在读书的时候，接触到了光荣公司的三国志9，一个跟前作后作完全特立独行的版本。
从此陷入了三国地图的山川河流，城寨关塞里，难以自拔。
我最喜欢的选194年群雄割据的剧本，选择刘备开战。
此时，董卓已死，各路英雄基本还在：吕布还是天下第一，纵横江湖；
袁绍被称作河北，还不叫冢中枯骨；曹操正唯才是举，蠢蠢欲动；
刘备在小沛，虽然十分屌丝，却也艰难地迈出了跟诸侯比一比头铁的脚步；
郭嘉尚在，孔明未出，徐庶还叫单福，是从花果山路砍到南天门街最靓的仔。
诸葛亮14岁，处在青春叛逆期，在荆州依附刘表读书种地，还没有自比管乐，也没准备好光复汉室鞠躬尽瘁。

之所以选择这个时间，就是为了招揽全部英雄。

内政是比较重要的玩法。我挺喜欢种田流的，每天都有收获，种田种的好，名利皆可抛。

战斗，做一些宏观的指令，减少战斗细节的控制。用战损比来描述战斗。


<div class="date">2023年3月2日</div>

## 开始

过年期间，心情烦躁。与其把这些宝贵的时间，花在毫无意义的烦躁上面，不如干点啥。于是，有了这个小工程，学习使人快乐。
此时节，游戏荒，电视荒，连暴雪都自绝于人民了。游戏行业惨淡，女儿成绩飘忽，俄乌局部战争打了一年，土耳其地震，世界是如此的不太平。教人好生意难平。

好烦啊烦，烦啊烦。

<div class="date">2023年3月1日</div>

